接下来的40分钟我将给大家介绍DDD驱动我司测试体系建设的整个过程

DDD实践中为了降低复杂度先决条件就是确定边界，本次话题也不例外 
整个测试体系的核心在于测试设计和测试执行两部分
测试设计保障测试的有效性和全面性
测试执行则要求测试高效性，强调的是用例开发速度要快，要走在整个研发过程的前面

话题包含三个方面：
自动化测试窘境讲诉的是我们之前在自动化上走过的一些弯路，遇到的一些问题
DDD驱动用例设计介绍的是DDD战略设计的实践
DDD驱动用例实现介绍了动态语言python的DDD实现

自动化测试基础内容有：自动化的环境部署、自动化的测试执行、自动化的测试分析
打造自动化防护网是敏捷转型或系统重构的首要任务，在做自动化初期的时候，包括开发和测试的人力均需投入自动化防护网的建设中
http://www.optimusinfo.com/5-advantages-automated-software-testing/
测试具有一致性和可重复性。

三大主要的应用场景：（1）增强型移动宽带；（2）超高可靠与低延迟的通信；（3）大规模机器类通信。具体包括：移动宽带、智慧家庭、智慧城市、增强现实、紧急任务应用、自动驾驶汽车。

资源主要包括：各种测试、配置、管理软件，各种硬件设备（单板，芯片、机柜），各种测试仪表
所以需要搭建适用各种验证场景的测试环境，下面谈谈测试环境的问

组成复杂：涉及资源众多环境组成复杂
拓扑多变：场景的多样性导致环境拓扑的多变
资源匮乏：如果不对测试加以约束，再多的资源投入都不够
搭建耗时：单次环境的搭建是非常耗时的，需要提升环境的利用率
从测试环境的特点可以看出，环境的搭建和维护对人的要求是比较高，形成了一定技术壁垒

刚才介绍过在自动化的建设中，需要全员参与
采用的方式是Dev和QA结对

最初的用例设计只考虑测试数据和过程的分离，做到过程复用，数据的变更不影响过程逻辑
因为测试用例是按照步骤组织的，因此选用的是面向过程的脚本语言tcl
初期按特性分类，将用例分派给不同的人并行开发

由于是并行开发，代码复用性比较差
面向过程和细节的开发，用例代码较难理解，大文件
支持数据变化，但流程变化则比较困难
测试平台又不够成熟也影响到用例实现
综合起来就导致：用例的开发速度慢于功能的开发速度，平台的开发速度慢于用例开发

针对前面的问题，首先更换了自动化测试平台，使用比较成熟的开源测试工具RobotFramework，自研平台开发人员全部都释放到用例框架设计上。
RF的表格式语法对测试人员更加友好
以关键字作为复用单元，对于测试框架进行分层约束
另外，RF加载的脚本是python这种多范式动态语言，灵活方便

关键字是以资源维度设计和抽象的，层次比较偏细节，例如：衰减器db的调整 可以表达UE到近点或者切换的业务含义
面向资源的关键字对于环境构成非常熟悉
用例过程较稳定，但由于工具变化导致关键字的实现经常需要修改
业务场景复杂，抽象层次低导致的可扩展性差

以业务概念为核心来抽象层次更高
整个模型更加贴近问题域人员容易达成一致
抽象层次高系统更加稳定
分离技术实现的复杂性更容易提升可维护性

领域专家和开发团队密切协作
领域知识通过统一语言描述
以子域的上下文为边界构建领域模型
聚焦于核心子域

首先达成认知共识站在同一个起跑线
通过统一语言来拟清模拟两可的概念
通过场景来驱动整个建模过程，还可确保模型的有效性
概念抽取和归类
通过设计形成初步的模型
模型精炼梳理

对基站业务进行子域划分，描述场景的过程中统一了语言，对业务概念进行抽取和归类，形成了四个子域
四个子域层次比较清晰，面向的不同的用户，所涉及的开发内容也较独立

基站领域模型，对上面的领域对象进行实体、值对象的识别，找到相互之间的关系，通过业务约束有选择的创建聚合
通过不变式

分解复杂度，分而治之
小聚合在数据一致性，分离关注点上具有优势
常规理解的领域对象的关系要受聚合的制约
强依赖转换为弱依赖

聚焦于是哪一个，而非是什么
使用abc模块实现抽象接口
对ID的访问进行控制
通过将实现类注册到元类的方式产生继承关系

聚焦于是什么，而非是哪一个
定义值对象的等于、不等于及对象hash值，禁用任何属性设置

聚合根
行为通过其所包含的实体和值对象协同完成

封装与各种数据源交互逻辑实现，数据源包括：数据库、各种工具
仓储的对外接口需要根据业务需要来构建，不要实现即席查询
类的接口抽象接口由Domain定义保证Domain的完整性，具体实现交给实现类
如果加载了部分聚合数据，可能表面聚合边界划分错误


