---
layout:     post
title:      "提交提交信息和缺陷报告的上下文"
subtitle:   "Google代码健康"
date:       2020-06-29 20:00:00
author:     "Kaelzhang"
header-img: "img/post-bg-js-module.jpg"
catalog:    true
tags:
    - DevOps
    - 代码质量
---

# Google代码健康：提交提交信息和缺陷报告的上下文

![](/img/in-post/Google/ch3.png)

本文源于Google公司的马桶上的健康代码，作者：Chris Lewis。

你已陷入了陷阱。机关在你周围旋转，但却毫无意义。你拼命寻找并找到建造者的原始计划！实现陷阱的工作单的描述为“杂项修改”。噢亲！天呐！

阅读其他工程师的代码有时会像是一次考古探险，充满了难以解释的怪异而奇妙的陈述。**代码总是因为某些目的而编写，但是有时在代码本身中并不清楚目的。**可以通过记录解释为什么需要更改的上下文来解决这一知识鸿沟。代码注释提供了上下文，但有时仅注释不能提供足够的内容。 

有两种关键方法表明上下文：

**提交消息**

* **提交消息是提供上下文的最简单、最容易发现的方法之一**。当遇到可能不清楚的代码行时，检查引入了代码的提交消息是一种很好的了解代码意图的好方法。 
* **编写提交消息的第一行，使其独立存在**，因为GitHub之类的工具将在提交列表页面中显示此行。独立的第一行使您可以**更快地浏览代码历史记录**，从而快速了解源文件随时间的演变。
 
 示例：  


``` C++
class Mammal { ...
  virtual Status Sleep(bool hibernate) = 0;
};
class Human : public Mammal { ...
  virtual Status Sleep(bool hibernate) {
    age += hibernate ? kSevenMonths : kSevenHours;
    return OK;
  }
};
```

**缺陷报告**

* **可以使用缺陷报告来跟踪错误/功能/重构的整个过程**，添加诸如原始问题描述，团队之间的设计讨论以及用于解决问题的提交之类的上下文。这样一来，可以轻松地在一个地方查看所有相关的提交，并允许其他人轻松跟踪特定问题的状态。
* **大多数提交应引用缺陷报告**。但是，独立提交（例如：一次性清理或其他小的计划外变更）不需要自身的缺陷报告，因为它们通常包含描述和源代码变更中的所有上下文。

**信息提交消息和缺陷报告的联合，从不同的角度提供上下文。**请记住，这样的上下文甚至**对提交人自己也很有用**，可以很容易地提醒提交人上周，上一季度甚至去年所做的工作。将来的你会感谢从前的你！  


